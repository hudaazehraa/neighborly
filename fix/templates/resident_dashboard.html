{% extends 'base.html' %}
{% load static %}

{% block title %}My Dashboard | Neighborly{% endblock %}

{% block content %}
<section class="dashboard-section section-gap1" data-aos="fade-up">
    <div class="w-layout-blockcontainer container-default w-container">
        
        <h1 class="admin-section-title">Welcome, {{ user.username }}!</h1>
        <p class="breadcrumb-subtitle" style="margin-bottom: 30px;">Hereâ€™s a quick overview of your activities.</p>

        <!-- Quick Actions -->
        <div class="dashboard-actions">
            <a href="{% url 'complaints' %}" class="dashboard-card" data-aos="zoom-in" data-aos-delay="100">
                <i class="fas fa-file-alt"></i>
                <span>Submit a Complaint</span>
            </a>
            <a href="{% url 'complaint_status' %}" class="dashboard-card" data-aos="zoom-in" data-aos-delay="200">
                <i class="fas fa-tasks"></i>
                <span>Check Complaint Status</span>
            </a>
            <a href="{% url 'contact' %}" class="dashboard-card" data-aos="zoom-in" data-aos-delay="300">
                <i class="fas fa-envelope"></i>
                <span>Contact Management</span>
            </a>
        </div>

        <!-- Recent Complaints Table -->
        <h2 class="section-subtitle" style="margin-top:30px; font-size: 25px;">My Recent Complaints</h2>
        <div class="table-wrapper" style="overflow-x: hidden;">
            <table class="custom-table" data-aos="fade-up" data-aos-delay="100">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Status</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for complaint in complaints %}
                    <tr data-aos="fade-right" data-aos-delay="{{ forloop.counter0|add:1 }}00">
                        <td>{{ complaint.title }}</td>
                        <td>
                            {% if complaint.status == 'pending' %}
                                <span class="status-badge status-pending" data-aos="zoom-in" data-aos-delay="200">
                                    Pending
                                </span>
                            {% elif complaint.status == 'resolved' %}
                                <span class="status-badge status-resolved" data-aos="zoom-in" data-aos-delay="200">
                                    Resolved
                                </span>
                            {% else %}
                                <span data-aos="zoom-in" data-aos-delay="200">
                                    {{ complaint.status }}
                                </span>
                            {% endif %}
                        </td>
                        <td>
                            {{ complaint.created_at|date:"M d, Y" }}
                        </td>
                    </tr>
                    {% empty %}
                    <tr data-aos="fade-up" data-aos-delay="200">
                        <td colspan="3" class="text-center" style="text-align: center;">No complaints submitted yet</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    </div>
</section>
{% endblock %}
